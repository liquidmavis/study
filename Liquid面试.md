# 面试

## 阿里一面

1. 项目有没有做了当前rpc框架没有做到的事

2. 项目为甚么选择zookeeper

   1. zookeeper是基于CP（强一致性和分区容错性），CAP（一致性、可用性、分区容错性）
   2. BASE（基本可用、软状态、最终一致性）由CAP发展而来：核心思想在于即使无法做到强一致性，也要做到最终一致性，也是堆AP理论的补充
   3. mysql、redis和eureka都没有保证一致性

3. zookeeper是如何做到分布式一致性的

   1. 基于ZAB协议，实现了主备模式的系统架构，由单一进程处理客户端事务请求
   2. 单一进程成为leader，leader转换客户端请求为proposal，并把其发送到各个follower，当超过半数foller同意后，leader再次向follower服务器分发commit要求其提交proposal

4. 怎么保证消费者拿到的跟生产者生产的一致性

   1. watcher机制，生产者改变ip信息，及时通知订阅了的消费者信息更改

5. 学习过程中有没有遇到甚么困难

6. Object有哪些方法

7. 面向对象三大特性

8. Arraylist和linkedlist区别

9. 接口和抽象类

10. 线程的同步和调度

    1. 同步
       1. wait()、notify(),配合synchroized使用
    2. 调度
       1. Sleep()、join()、interrup()、

11. 实现线程的几种方法（拉胯）

    1. 继承Thread重写run
    2. 实现Runnable接口

12. static修辞字段和没有修辞

13. jvm的内存区域

14. jvm的堆的空间

15. mysql几种索引

16. 乐观锁和悲观锁

    1. 乐观锁大多采用数据版本机制MVCC，配合CAS解决ABA问题
    2. 悲观锁：mysql的 for update语句

17. redis为社么快

    1. 完全基于内存
    2. 数据结构简单优秀，redis自己专门设计了数据结构如跳表等
    3. 单线程
    4. 多路I/O复用

18. redis的rdb和aof

19. redis建立高性能集群

    1. ![img](Liquid面试.assets/v2-334138ba60cb9da3528f747e6b6a6d65_720w.jpg)

    2. Gossip协议的基本工作原理就是：节点彼此不断通信交换信息，一段时间后所有的节点都会知道集群完整的信息，有点类似于流言传播。

       集群中的每个节点通过一定规则挑选要通信的节点，每个节点可能知道全部节点，也可能仅知道部分节点，只要这些节点彼此可以正常通信，最终它们会达到一致的状态。

       gossip协议的好处是元数据的更新比较分散，不是集中在一个地方，这样降低了单节点的请求压力。缺点是元数据更新有延时，可能导致集群的一些操作会有一些滞后。

    3. 客服端访问规则

       1. ![img](Liquid面试.assets/20200410214742501.png)

20. 有没有阅读过框架源码（spring的模版和创建bean）

21. spring注入的几种例子

    1. autowire注入
    2. set方法注入
    3. 构造方法注入

22. 知道cdn原理吗

    1. 为了加速网站访问
    2. 需要服务商配合
    3. 主要依靠dns解析
    4. 首先用户经过本地dns系统解析转到cdn专用dns服务器
       1. cdn的dns服务器向cdn的全局负载均衡设备发送url请求
       2. 负载均衡根据用户ip返回一个所属区域的服务器ip
       3. 用户请求该ip获取资源





## 京东一面

1. 问了我3年前的实习项目，忘都忘完了
2. 项目如何实现服务注册和服务消费
3. 问难点 回答心跳机制和半包沾包
4. 问客服端如何知道服务器关闭
5. 问客户端怎么重启
   1. 用schedule延时10秒左右线程去执行客户端的连接,貌似不需要
6. java异常分类
   1. Exception和Error
      1. Exception能够捕获，Error不能捕获如OOM
   2. Exception有分为受检查异常和不受检查异常
      1. 受检查异常必须要catch或者throws才能编译通过
      2. RuntimeExcetion的子类都为不受检查如空指针、数组越界、类型转换错误、算数错误
7. 问使用过哪些中间件
8. redis对输入限制
   1. key和string的value限制为512MB
9. redis底层 答sds和skiplist
10. redis类型